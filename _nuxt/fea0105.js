(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{487:function(t,e,n){var content=n(615);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(29).default)("7a17d016",content,!0,{sourceMap:!1})},614:function(t,e,n){"use strict";n(487)},615:function(t,e,n){var r=n(28),o=n(108),m=n(616),c=r(!1),l=o(m);c.push([t.i,'.tournament[data-v-3e7f1e2c]{padding-bottom:30px}.tournament__top[data-v-3e7f1e2c]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.tournament__back[data-v-3e7f1e2c]{color:#9fb1cc;position:relative;padding-left:28px;cursor:pointer}.tournament__back[data-v-3e7f1e2c]:before{content:"";width:24px;height:24px;background-image:url('+l+");position:absolute;left:0;top:50%;transform:translateY(-50%)}.tournament__logo img[data-v-3e7f1e2c]{max-height:80px}.tournament__tournament[data-v-3e7f1e2c]{display:flex;grid-gap:15px;gap:15px;padding:40px;margin-bottom:30px;border:2px solid #565656}.tournament__tournament-img[data-v-3e7f1e2c]{width:62px;height:62px}.tournament__tournament-info-title[data-v-3e7f1e2c]{font-size:32px;line-height:100%;font-weight:500;margin-bottom:5px}.tournament__tournament-info-text[data-v-3e7f1e2c]{color:#67707a}.tournament__inner[data-v-3e7f1e2c]{display:flex;justify-content:space-between;align-items:flex-start;grid-gap:8px;gap:8px}.tournament__nav[data-v-3e7f1e2c]{display:flex;margin-bottom:-2px}.tournament__nav-item[data-v-3e7f1e2c]{color:#67707a;line-height:32px;padding:10px 30px 15px;display:block;font-weight:500}.tournament__nav-item.nuxt-link-exact-active.nuxt-link-active[data-v-3e7f1e2c]{color:#f5f5f5;border:2px solid #565656;border-bottom-color:#0f1215}.tournament__info[data-v-3e7f1e2c]{border:2px solid #565656;padding:50px;width:808px}.tournament__requirements[data-v-3e7f1e2c]{max-width:408px;width:100%;border:2px solid #444546}.tournament__requirements-title[data-v-3e7f1e2c]{color:#f5f5f5;font-size:18px;font-weight:500;padding:12px 0 20px 15px;border-bottom:2px solid #444546}.tournament__requirements-inner[data-v-3e7f1e2c]{border-bottom:2px solid #444546;padding:20px 0 20px 12px}.tournament__requirements-inner-title[data-v-3e7f1e2c]{font-weight:500;text-transform:uppercase}.tournament__requirements-inner-text[data-v-3e7f1e2c]{color:#67707a}.tournament__requirements-inner-link[data-v-3e7f1e2c]{color:#0a68f5}.tournament__requirements-age[data-v-3e7f1e2c]{margin-bottom:5px}.tournament__requirements-play[data-v-3e7f1e2c]{margin-top:5px}.tournament__requirements-sign[data-v-3e7f1e2c]{max-width:290px;margin:10px auto 30px}.tournament__requirements-sign-warning[data-v-3e7f1e2c]{color:#b83333;margin-bottom:10px}.tournament__requirements-sm[data-v-3e7f1e2c]{display:flex;justify-content:center;align-items:center;border-top:2px solid #444546}.tournament__requirements-sm-item[data-v-3e7f1e2c]{width:48px;height:48px;padding:16px;cursor:pointer}.tournament__requirements-sm-item[data-v-3e7f1e2c]:hover{background:hsla(0,0%,100%,.3)}@media (max-width:1300px){.tournament__inner[data-v-3e7f1e2c]{flex-wrap:wrap;justify-content:center}.tournament__info[data-v-3e7f1e2c]{width:100%}}@media (max-width:600px){.tournament__nav[data-v-3e7f1e2c]{flex-wrap:wrap}.tournament__nav .nuxt-link-exact-active.nuxt-link-active[data-v-3e7f1e2c]{border:none}}",""]),t.exports=c},616:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTcuOTkgMTFIMjBWMTNINy45OVYxNkw0IDEyTDcuOTkgOFYxMVoiIGZpbGw9IiM5RkIxQ0MiLz4KPC9zdmc+Cg=="},698:function(t,e,n){"use strict";n.r(e);var r=n(4),o=(n(10),n(37),n(44),n(109),n(50),n(82),n(22),n(38)),m={asyncData:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,m,c,l,d,_;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$fire,o=r.database.ref("games"),n.prev=2,n.next=5,o.once("value");case 5:l=n.sent,m=l.val(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.log(n.t0);case 12:return d=r.database.ref("tournaments"),n.prev=13,n.next=16,d.once("value");case 16:_=n.sent,c=_.val(),n.next=23;break;case 20:n.prev=20,n.t1=n.catch(13),e.$toasted.error(n.t1);case 23:return n.abrupt("return",{games:m,tournaments:c});case 24:case"end":return n.stop()}}),n,null,[[2,9],[13,20]])})))()},computed:Object(o.b)(["getUser"]),mounted:function(){var t=this;this.id=this.$route.params.id,this.game=this.$route.params.game,Object.keys(this.games).forEach((function(e){t.games[e].title===t.game&&(t.icon=t.games[e].gameIconImg)})),Object.keys(this.tournaments).forEach((function(e){t.tournaments[e].id===t.id&&(t.tournament=t.tournaments[e],t.tournaments[e].players&&(t.players=+Object.keys(t.tournaments[e].players).length))})),setTimeout((function(){t.tournament.players&&Object.keys(t.tournament.players).forEach((function(e){t.tournament.players[e].id===t.getUser.id&&(t.registered=!0)}))}),300)},data:function(){return{id:"",game:"",icon:"",tournament:"",registered:!1,players:"",delay:null}},methods:{register:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.delay=!0,"Premium"!==t.tournament.entryPrice||"free"!==t.getUser.subscribe){e.next=3;break}return e.abrupt("return",t.$toasted.error("This league only for premium users"));case 3:if("Private"!==t.tournament.entryPrice){e.next=5;break}return e.abrupt("return",t.$toasted.error("This league is private, ask the host to add you"));case 5:if(!t.tournament.maxPlayers||t.players!==+t.tournament.maxPlayers){e.next=7;break}return e.abrupt("return",t.$toasted.error("No slots available"));case 7:if("Free"===t.tournament.entryPrice||"Premium"===t.tournament.entryPrice){e.next=21;break}if(!(t.getUser.eur-+t.tournament.entryPrice.slice(1)<0)){e.next=10;break}return e.abrupt("return",t.$toasted.error("You don't have enough money"));case 10:return e.next=12,t.$fire.database.ref("users/".concat(t.getUser.id,"/eur"));case 12:return n=e.sent,e.prev=13,e.next=16,n.set(t.getUser.eur-+t.tournament.entryPrice.slice(1));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),t.$toasted.error(e.t0);case 21:return e.next=23,t.$fire.database.ref("tournaments/".concat(t.id,"/players/").concat(t.getUser.id));case 23:return r=e.sent,e.prev=24,e.next=27,r.set({id:t.getUser.id,username:t.getUser.username});case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(24),t.$toasted.error(e.t1);case 32:t.registered=!0,t.players++,t.$toasted.success("You have registered"),setTimeout((function(){return t.delay=null}),100);case 36:case"end":return e.stop()}}),e,null,[[13,18],[24,29]])})))()},unregister:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.delay=!0,e.next=3,t.$fire.database.ref("tournaments/".concat(t.id,"/players/").concat(t.getUser.id));case 3:return n=e.sent,e.prev=4,e.next=7,n.set(null);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),t.$toasted.error(e.t0);case 12:if("$"!==t.tournament.entryPrice[0]){e.next=24;break}return e.next=15,t.$fire.database.ref("users/".concat(t.getUser.id,"/eur"));case 15:return r=e.sent,e.prev=16,e.next=19,r.set(t.getUser.eur+ +t.tournament.entryPrice.slice(1));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(16),t.$toasted.error(e.t1);case 24:t.registered=!1,t.players--,t.$toasted.success("You leave"),setTimeout((function(){return t.delay=null}),100);case 28:case"end":return e.stop()}}),e,null,[[4,9],[16,21]])})))()}}},c=(n(614),n(13)),component=Object(c.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tournament"},[n("div",{staticClass:"tournament__top"},[n("div",{staticClass:"tournament__top-text"},[n("nuxt-link",{staticClass:"tournament__back",attrs:{to:"/tournaments/"+t.game}},[t._v("Back")])],1),t._v(" "),n("div",{staticClass:"tournament__logo"},[n("img",{attrs:{src:t.icon,alt:""}})])]),t._v(" "),n("div",{staticClass:"tournament__inner"},[n("div",{staticClass:"tournament__inner-item"},[n("div",{staticClass:"tournament__tournament"},[n("div",{staticClass:"tournament__tournament-img"},[n("img",{attrs:{src:t.icon,alt:""}})]),t._v(" "),n("div",{staticClass:"tournament__tournament-info"},[n("div",{staticClass:"tournament__tournament-info-title"},[t._v(t._s(t.tournament.title))]),t._v(" "),n("div",{staticClass:"tournament__tournament-info-text"},[t._v(t._s(t.players||0)+" players signed up")])])]),t._v(" "),n("div",{staticClass:"tournament__nav"},[n("nuxt-link",{staticClass:"tournament__nav-item",attrs:{to:"/tournaments/"+t.game+"/"+t.id}},[t._v("Info")]),t._v(" "),n("nuxt-link",{staticClass:"tournament__nav-item",attrs:{to:"/tournaments/"+t.game+"/"+t.id+"/bracket"}},[t._v("Bracket")]),t._v(" "),n("nuxt-link",{staticClass:"tournament__nav-item",attrs:{to:"/tournaments/"+t.game+"/"+t.id+"/players"}},[t._v("Players")]),t._v(" "),n("nuxt-link",{staticClass:"tournament__nav-item",attrs:{to:"/tournaments/"+t.game+"/"+t.id+"/rules"}},[t._v("Rules")]),t._v(" "),n("nuxt-link",{staticClass:"tournament__nav-item",attrs:{to:"/tournaments/"+t.game+"/"+t.id+"/support"}},[t._v("Support")])],1),t._v(" "),n("nuxt-child",{staticClass:"tournament__info",attrs:{setRegister:t.registered}})],1),t._v(" "),n("div",{staticClass:"tournament__requirements"},[n("div",{staticClass:"tournament__requirements-title"},[t._v("Requirements")]),t._v(" "),n("div",{staticClass:"tournament__requirements-inner"},[t.tournament.minAge?n("div",{staticClass:"tournament__requirements-age"},[n("div",{staticClass:"tournament__requirements-inner-title"},[t._v("Minimum age")]),t._v(" "),n("div",{staticClass:"tournament__requirements-inner-text"},[t._v("At least "+t._s(t.tournament.minAge)+" years old")])]):t._e(),t._v(" "),n("div",{staticClass:"tournament__requirements-inner-title"},[t._v("Residence")]),t._v(" "),n("nuxt-link",{staticClass:"tournament__requirements-inner-link",attrs:{to:"/"}},[t._v("More info")]),t._v(" "),n("div",{staticClass:"tournament__requirements-play"},[n("div",{staticClass:"tournament__requirements-age"},[n("div",{staticClass:"tournament__requirements-inner-title"},[t._v("Entry price")]),t._v(" "),n("div",{staticClass:"tournament__requirements-inner-text"},[t._v(t._s(t.tournament.entryPrice))])]),t._v(" "),n("div",{staticClass:"tournament__requirements-inner-title"},[t._v("Play")]),t._v(" "),n("div",{staticClass:"tournament__requirements-inner-text"},[t._v("Please log in to take part in this tournament.")])])],1),t._v(" "),n("div",{staticClass:"tournament__requirements-sign"},[n("div",{staticClass:"tournament__requirements-sign-warning"},[t._v("Register close in "+t._s(t.tournament.startDate))]),t._v(" "),t.registered?n("div",{staticClass:"tournament__requirements-sign-btn",on:{click:t.unregister}},[n("my-button",{staticClass:"secondary",attrs:{disabled:t.delay}},[t._v("Unregister")])],1):this.$fire.auth.currentUser?n("div",{staticClass:"tournament__requirements-sign-btn",on:{click:t.register}},[n("my-button",{attrs:{disabled:t.delay}},[t._v("Register")])],1):n("nuxt-link",{staticClass:"tournament__requirements-sign-btn",attrs:{to:"/auth/login"}},[n("my-button",[t._v("Log in / Register")])],1)],1),t._v(" "),n("div",{staticClass:"tournament__requirements-sm"},t._l(5,(function(t){return n("img",{staticClass:"tournament__requirements-sm-item",attrs:{src:"/images/icons/sm/sm-"+t+".svg",alt:""}})})),0)])])])}),[],!1,null,"3e7f1e2c",null);e.default=component.exports;installComponents(component,{MyButton:n(208).default})}}]);